<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å‡½é¤¨é«˜å°‚ç”Ÿã®ã‚¿ã‚¤ãƒ”ãƒ³ã‚°</title>
  <style>
    body {
      background-color: #ffffff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 40px;
      margin: 0;
      background-image: url('pophaikei.png'); 
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center center;
       background-attachment: fixed;

    }


    #titleArea {
  padding-top: 100px; /* ã“ã“ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ã§ä¸­å¤®å¯„ã›ã«è¿‘ã¥ã‘ã‚‹ */
}
    h1 {
      font-size: 64px;
      line-height: 1.2;
      color: #333;
      margin-bottom: 20px;
    }

    .btn {
      background-color: #000000;
      color: white;
      padding: 15px 30px;
      font-size: 24px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      animation: zoom 1.8s infinite alternate;
    }
     .btn2 {
      background-color: #ff4500;
      color: white;
      padding: 15px 30px;
      font-size: 24px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      animation: zoom 1.8s infinite alternate;
    }
    #titleContainer {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 30px;
}

#titleImage {
  width: 180px;
  height: 180px;
  animation: spin 8s linear infinite;
  border-radius: 12px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}


    @keyframes zoom {
      0% { transform: scale(1); }
      100% { transform: scale(1.05); }
    }

    .hidden { display: none; }

    #japaneseText {
      font-size: 32px;
      margin-top: 20px;
    }

    #typingArea {
      
      font-size: 48px;
      margin-top: 10px;
    }

    

    .correct {
      color: blue;
    }

    #score, #miss, #timer {
      margin-top: 15px;
      font-size: 18px;
    }

    #message {
  font-size: 36px;          
  font-weight: bold;       
  margin-top: 240px;
  text-align: center;       
  color: #333;             
}

    select {
  font-size: 18px;
  padding: 12px 24px;
  border-radius: 8px;
  border: 2px solid #4CAF50;
  background-color: #f8fff8;
  color: #333;
  margin: 10px 0;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  appearance: none;
  cursor: pointer;
}

    #resultScreen {
  margin-top: 100px;
  font-size: 32px;
  font-weight: bold;
  color: #222;
  text-align: center;
}

#resultScreen h2 {
  font-size: 48px;
  color: #e60033; /* ã‚Šã–ã‚‹ã¨ç”»é¢ã®ã¨ã“ */
  margin-bottom: 20px;
}

#resultScreen p {
  margin: 10px 0;
  font-size: 36px;
  color: #0066cc;
}

.x-share-link {
  display: inline-block;
  background: #1da1f2;
  color: white;
  padding: 12px 20px;
  font-size: 1.1rem;
  border-radius: 30px;
  text-decoration: none;
  font-weight: bold;
  transition: background 0.3s, transform 0.2s;
}
.x-share-link:hover {
  background: #0d8ddb;
  transform: scale(1.05);
}
 
   





  </style>
</head>
<body>
 <div id="titleArea">
  <div id="titleContainer">
    <img id="titleImage" src="hakodatelogo.png" alt="ã‚¿ã‚¤ãƒˆãƒ«ç”»åƒ">
    <div>
      <h1>å‡½é¤¨é«˜å°‚ç”Ÿã®<br>ã‚¿ã‚¤ãƒ”ãƒ³ã‚°</h1>
     
      <button class="btn2" id="startBtn">ã¯ã˜ã‚ã‚‹</button>
      <button class="btn" id="aboutBtn">ãŠã‚Œã®X</button>
      <br>
      <div>ğŸ‘‡ãƒ¬ãƒ™ãƒ«ã‚’å¤‰æ›´</div>
       <select id="difficulty">
        <option value="easy">ã‹ã‚“ãŸã‚“</option>
        <option value="normal" selected>ãµã¤ã†</option>
        <option value="hard">ã‚€ãšã‹ã—ã„</option>
      </select><br>
    </div>
  </div>
</div>

<div id="message" class="hidden">ã‚¹ãƒšãƒ¼ã‚¹ã§é–‹å§‹</div>
  

<div id="gameScreen" class="hidden">
  <div id="japaneseText"></div>
  <div id="typingArea"></div>
  <div id="timer">60ç§’</div>
  <div id="score">ã‚¹ã‚³ã‚¢: 0</div>
  <div id="miss">ãƒŸã‚¹: 0</div>
</div>

  
  <audio id="typeSound" src="caco.mp3" preload="auto"></audio>
  <audio id="missSound" src="gua.mp3" preload="auto"></audio>
  <audio id="startSound" src="start.mp3" preload="auto"></audio>
  <audio id="bgm" src="maju.mp3" autoplay loop preload="auto"></audio>
  <audio id="finishSound" src="hoih.mp3" preload="auto"></audio>



  <script>
    const sentenceBank = {
      easy: ["ã¯ã“ã ã¦", "ã“ã†ã›ã‚“", "ã¨ãã‚‰ã¡ã‚‡ã†", "ã—ã‚…ã‚“ã¡ã‚‡ã†ã‚Šã‚‡ã†","ã¯ã“ã ã¦ã“ã†ã›ã‚“","ãŸã„ã„ãã‹ã‚“", "ã‚Šã‚…ã†ã­ã‚“", "ã‚ã‹ã¦ã‚“", "ã¤ã„ã«ã‚“ã—ã‘ã‚“", "ã»ã“ã†", "ã»ã—ã‚…ã†", "ã—ã‚‰ã°ã™", "ã“ãã•ã„ã¨ã†", "ã™ã½ãƒ¼ã¤ã‹ãŒã", "ã˜ã•ã¤", "ã»ã‚ŒãŸã“ã“ã‚", "ã‚†ã®ã‹ã‚ãˆã", "ãã‚€ã‚ã„ã·", "ã¯ã‚‰ã™ã‚ã‚“ã¨", "ã‚ŠããŒã", "ãŠã„ã“ã‚“", "ã‚ã¼ã‘ã‚“", "ã“ã†ã›ã‚“ã³ã‚‡ã†", "ã“ã†ãŒãã‚Šã¦ã‚‰ã—ãƒ¼", "ã“ã†ãŒãããã˜ã£ã‘ã‚“", "ãã‹ã„ã›ã„ãš", "ã›ã„ãã‚‡ã†ã„ã", "ã“ã“ã‚ã®ã‚„ã¾ã„", "ãˆãª", "ã†ã¤", "ãˆãªã©ã‚Š", "ã—ã¾ãˆãªãŒ", "ã‚ˆã‚‹ãŒãŸ"],
      normal: ["ã›ã„ã•ã‚“ã—ã™ã¦ã‚€ã“ã†ãŒãã‹", "ã¶ã£ã—ã¤ã‹ã‚“ãã‚‡ã†ã“ã†ãŒãã‹", "ã—ã‚ƒã‹ã„ãã°ã‚“ã“ã†ãŒãã‹", "ã—ã‚…ã‚“ã¡ã‚‡ã†ã‚Šã‚‡ã†ã¯ã”ã¿", "ã‚ã¼ã£ã¨ã“ã†ãŒã", "ã«ã‚…ã†ã‚‚ã‚“ã—ãƒ¼ã’ã‚“ã”", "ã“ã†ã›ã‚“ã›ã„ã®ã“ã¿ã‚…ã«ã‘ãƒ¼ã—ã‚‡ã‚“ã«ã‚…ã†ã‚‚ã‚“", "ãŒãã›ã„ã›ã„ã‹ã¤ã®ã¦ã³ã", "ã³ã¶ã‚“ã›ãã¶ã‚“", "ã—ã‚“ããã™ã†ãŒãã‹ã„ã¦ã„ã°ã‚“", "ã—ã‚“ã›ã‚“ã‘ã„ã ã„ã™ã†ã‹ã„ã¦ã„ã°ã‚“", "ã»ã£ã‹ã„ã©ã†ãã‚‡ã†ã„ãã ã„ãŒã", "ã•ã‹ãªã‚’ã¤ã£ã¦ãŸã¹ã‚‹ã‹ã„", "ãã¿ã¯ã”ã˜ã‚…ã£ã¦ã‚“ã’ã‚“ã¦ã‚“ã ", "ã‚Œã¹ã‚‹ã®ãŸã‹ã„ã˜ã‚‡ã†ã ã‚“", "ã›ã‹ã„ã¸ã¯ã°ãŸãã¯ã“ã ã¦ã“ã†ã›ã‚“", "ãªãŒã‚†ã‚ã‚’ã‚‚ã¦", "ãŸã„ã—ã‚’ã„ã ã‘", "ã¡ã‹ã‚‰ã¤ã‚ˆã‹ã‚Œ", "ã›ã‚“ãã‚…ã†ã²ã‚ƒãã‚ãã˜ã‚…ã†ã«ã­ã‚“", "ã›ã„ãŸã„ã˜ã‚‡ã†ã»ã†ã˜ã£ã‘ã‚“ã—ã¤", "ã‚ãƒ¼ã¡ã‡ã‚Šãƒ¼ã˜ã‚‡ã†", "ã¨ã‚‚ãˆã‚Šã‚‡ã†", "ã ã„ã„ã¡ã“ã†ãã—ã¤", "ã“ã†ã›ã‚“ã–ã‹", "ã•ã¤ã©ã‚‰ã¯ã“ã ã¦ã¨ãã‚‰ã¦ã‚“", "ã„ã£ã›ã„ãŒãã—ã‚…ã†", "ãã‚‡ã†ã¤ã†ãŒãã—ã‚…ã†ã˜ã‹ã‚“"],
      hard: ["ã©ãã‚Šã¤ãã‚‡ã†ã›ã„ã»ã†ã˜ã‚“ã“ãã‚Šã¤ã“ã†ã¨ã†ã›ã‚“ã‚‚ã‚“ãŒã£ã“ã†ãã“ã†ã“ãã‚Šã¤ã¯ã“ã ã¦ã“ã†ãã‚‡ã†ã“ã†ã¨ã†ã›ã‚“ã‚‚ã‚“ãŒã£ã“ã†", "ã•ã—ã®ã¼ã‚‹ã‚ã•ã²ã«ã¯ãˆã¦ããã‚ŠãŸã¤ã“ã®ã¾ãªã³ã‚„ã«ã•ã¡ãŠãŠãã‚†ã‚ã‚’ã„ã ãã¦ã¤ã©ã„ãã—ã‚ãŒã¯ã‚‰ã‹ã‚‰ã‚ˆ"]
    };

    const kanaMap = {
      "ãã‚ƒ":"kya", "ãã‚…":"kyu", "ãã‚‡":"kyo", "ã—ã‚ƒ":"sya", "ã—ã‚…":"syu", "ã—ã‚‡":"syo",
      "ã¡ã‚ƒ":"tya", "ã¡ã‚…":"tyu", "ã¡ã‚‡":"tyo",  "ã¡ã‡":"tye","ã«ã‚ƒ":"nya", "ã«ã‚…":"nyu", "ã«ã‚‡":"nyo",
      "ã²ã‚ƒ":"hya", "ã²ã‚…":"hyu", "ã²ã‚‡":"hyo","ã³ã‚ƒ":"bya", "ã³ã‚…":"byu", "ã³ã‚‡":"byo","ã¿ã‚ƒ":"mya", "ã¿ã‚…":"myu", "ã¿ã‚‡":"myo",
      "ã‚Šã‚ƒ":"rya", "ã‚Šã‚…":"ryu", "ã‚Šã‚‡":"ryo", "ãã‚ƒ":"gya", "ãã‚…":"gyu", "ãã‚‡":"gyo",
      "ã˜ã‚ƒ":"ja", "ã˜ã‚…":"ju", "ã˜ã‚‡":"jo",
      "ã‚":"a", "ã„":"i", "ã†":"u", "ãˆ":"e", "ãŠ":"o",
      "ã‹":"ka", "ã":"ki", "ã":"ku", "ã‘":"ke", "ã“":"ko",
      "ã•":"sa", "ã—":"si", "ã™":"su", "ã›":"se", "ã":"so",
      "ãŸ":"ta", "ã¡":"ti", "ã¤":"tu", "ã¦":"te", "ã¨":"to",
      "ãª":"na", "ã«":"ni", "ã¬":"nu", "ã­":"ne", "ã®":"no",
      "ã¯":"ha", "ã²":"hi", "ãµ":"fu", "ã¸":"he", "ã»":"ho",
      "ã¾":"ma", "ã¿":"mi", "ã‚€":"mu", "ã‚":"me", "ã‚‚":"mo",
      "ã‚„":"ya", "ã‚†":"yu", "ã‚ˆ":"yo",
      "ã‚‰":"ra", "ã‚Š":"ri", "ã‚‹":"ru", "ã‚Œ":"re", "ã‚":"ro",
      "ã‚":"wa", "ã‚’":"wo", "ã‚“":"nn",
      "ãŒ":"ga", "ã":"gi", "ã":"gu", "ã’":"ge", "ã”":"go",
      "ã–":"za", "ã˜":"ji", "ãš":"zu", "ãœ":"ze", "ã":"zo",
      "ã ":"da", "ã¢":"ji", "ã¥":"zu", "ã§":"de", "ã©":"do",
      "ã°":"ba", "ã³":"bi", "ã¶":"bu", "ã¹":"be", "ã¼":"bo",
      "ã±":"pa", "ã´":"pi", "ã·":"pu", "ãº":"pe", "ã½":"po", "ãƒ¼":"-"
    };

    let romaji = '';
    let input = '';
    let sentence = '';
    let score = 0;
    let miss = 0;
    let started = false;
    let timer = 60;
    let timerId = null;

    const startBtn = document.getElementById('startBtn');
    const titleArea = document.getElementById('titleArea');
    const message = document.getElementById('message');
    const gameScreen = document.getElementById('gameScreen');
    const japaneseText = document.getElementById('japaneseText');
    const typingArea = document.getElementById('typingArea');
    const scoreDisplay = document.getElementById('score');
    const missDisplay = document.getElementById('miss');
    const timerDisplay = document.getElementById('timer');
    const typeSound = document.getElementById('typeSound');
    const missSound = document.getElementById('missSound');

    function kanaToRomaji(text) {
      let result = '';
      for (let i = 0; i < text.length; i++) {
        if (text[i] === 'ã£' && i + 1 < text.length) {
          const next = text.slice(i + 1, i + 3);
          const nextRomaji = kanaMap[next] || kanaMap[text[i + 1]];
          result += nextRomaji[0] + nextRomaji;
          i++;
          
        } else if (kanaMap[text.slice(i, i + 2)]) {
          result += kanaMap[text.slice(i, i + 2)];
          i++;
        } else {
          result += kanaMap[text[i]] || text[i];
        }
      }
      return result;
    }

    function loadNewSentence() {
      const level = document.getElementById('difficulty').value;
      const list = sentenceBank[level];
      sentence = list[Math.floor(Math.random() * list.length)];
      romaji = kanaToRomaji(sentence);
      input = '';
      japaneseText.textContent = sentence;
      updateTypingArea();
    }

    function updateTypingArea() {
      typingArea.innerHTML = `<span class="correct">${input}</span>${romaji.slice(input.length)}`;
    }

    function playSound() {
      typeSound.currentTime = 0;
      typeSound.play();
    }

    function playStartSound() {
  const sound = document.getElementById('startSound');
  sound.currentTime = 0;
  sound.play();
}



    function startGame() {
      score = 0;
      miss = 0;
      timer = 60;
      started = true;
      updateScore();
      updateMiss();

      titleArea.classList.add('hidden');
      message.classList.remove('hidden');
    }

    function beginTyping() {
      message.classList.add('hidden');
      gameScreen.classList.remove('hidden');
      loadNewSentence();

      timerId = setInterval(() => {
        timer--;
        timerDisplay.textContent = `${timer}ç§’`;
       if (timer <= 0) {
  clearInterval(timerId);
  gameScreen.classList.add('hidden');

  const finishSound = document.getElementById('finishSound');
  finishSound.play();
       

  const resultScreen = document.getElementById('resultScreen');
  const finalScore = document.getElementById('finalScore');
  const finalMiss = document.getElementById('finalMiss');

  finalScore.textContent = `ã‚¹ã‚³ã‚¢: ${score}`;
  finalMiss.textContent = `ãƒŸã‚¹: ${miss}`;

  resultScreen.classList.remove('hidden');
}

      }, 1000);
    }

    function updateScore() {
      scoreDisplay.textContent = `ã‚¹ã‚³ã‚¢: ${score}`;
    }

    function updateMiss() {
      missDisplay.textContent = `ãƒŸã‚¹: ${miss}`;
    }

   const bgm = document.getElementById('bgm');

startBtn.addEventListener('click', () => {
  bgm.play(); 
   bgm.volume = 0.3;
  startGame();
});

   
    
    document.getElementById('aboutBtn').addEventListener('click', () => {
  window.open('https://x.com/sta0z', '_blank');
});


    document.addEventListener('keydown', (e) => {
      if (!started) return;

      if (message.classList.contains('hidden') === false && e.code === 'Space') {
        e.preventDefault();
        playStartSound();
        beginTyping();
        return;
      }

     if (!/^[a-zãƒ¼\-]$/i.test(e.key)) return;

      const key = e.key.toLowerCase();
      const expectedChar = romaji[input.length];

      if (key === expectedChar) {
        input += key;
        playSound();
        updateTypingArea();
        if (input === romaji) {
          score++;
          updateScore();
          loadNewSentence();
        }
      } else {
        miss++;
        updateMiss();
        missSound.currentTime = 0;
  missSound.play();
      }
    });

    window.addEventListener('load', () => {
  const score = document.getElementById('finalScore').textContent;
  const miss = document.getElementById('finalMiss').textContent;
  const time = document.getElementById('timer').textContent;

  const text = `ğŸ® ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ãƒãƒ£ãƒ¬ãƒ³ã‚¸ çµæœ ğŸ®\nã‚¹ã‚³ã‚¢: ${finalScore}\nãƒŸã‚¹: ${finalMiss}\nã‚¿ã‚¤ãƒ : ${time}\n#ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ãƒãƒ£ãƒ¬ãƒ³ã‚¸`;

  const tweetUrl = `https://twitter.com/share?text=${encodeURIComponent(text)}&url=https://ccrroo.github.io/typing;

  document.getElementById('tweetLink').setAttribute('href', tweetUrl);
});
  </script>

  <div id="resultScreen" class="hidden">
  <h2>âŒ› çµæœç™ºè¡¨ âŒ›</h2>
  <p id="finalScore">ã‚¹ã‚³ã‚¢: 0</p>
  <p id="finalMiss">ãƒŸã‚¹: 0</p>
  <button class="btn2" onclick="location.reload()">ã‚Šã¨ã‚‰ã„ï¼</button>
  <a id="tweetLink" 
   href="#" 
   target="_blank" 
   rel="nofollow noopener noreferrer"
   class="x-share-link"
>
   çµæœã‚’Xã§ã‚·ã‚§ã‚¢
</a>

    

    

  


</div>


</body>
</html>
